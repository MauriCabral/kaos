<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<VBox prefHeight="550" prefWidth="800" spacing="0" stylesheets="@../css/order-details.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.kaos.controller.OrderDetailsController">

    <!-- HEADER -->
    <HBox alignment="CENTER" spacing="10" styleClass="header">
        <ImageView fitHeight="28" fitWidth="28" preserveRatio="true">
            <Image url="@../image/logo.png" />
        </ImageView>
        <Label styleClass="header-title" text="Detalle del Pedido" />
        <Region HBox.hgrow="ALWAYS" />
        <Label fx:id="orderNumberLabel" styleClass="order-number" />
    </HBox>

    <!-- CONTENIDO PRINCIPAL -->
    <HBox spacing="0" VBox.vgrow="ALWAYS">

        <!-- PANEL IZQUIERDO - ITEMS -->
        <VBox prefWidth="480" spacing="0" styleClass="items-panel">
            <padding>
                <Insets bottom="12" left="12" right="12" top="12" />
            </padding>

            <Label styleClass="section-title" text="Items del Pedido" />

            <ScrollPane fitToWidth="true" styleClass="items-scroll" VBox.vgrow="ALWAYS">
                <VBox fx:id="itemsContainer" spacing="6" />
            </ScrollPane>

            <!-- RESUMEN -->
            <VBox spacing="6" styleClass="summary-container">
                <HBox alignment="CENTER_LEFT" spacing="6">
                    <Label styleClass="summary-label" text="Subtotal:" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Label fx:id="subtotalLabel" styleClass="summary-value" text="0.00" />
                </HBox>
                <HBox alignment="CENTER_LEFT" spacing="6">
                    <Label styleClass="summary-label" text="Delivery:" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Label fx:id="deliveryPriceLabel" styleClass="summary-value" text="0.00" />
                </HBox>
                <Separator styleClass="summary-separator" />
                <HBox alignment="CENTER_LEFT" spacing="6">
                    <Label styleClass="total-label" text="TOTAL:" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Label fx:id="totalLabel" styleClass="total-value" text="0.00" />
                </HBox>
            </VBox>
        </VBox>

        <Separator orientation="VERTICAL" />

        <!-- PANEL DERECHO COMPACTADO -->
        <VBox prefWidth="320" spacing="10" styleClass="actions-panel">
            <padding>
                <Insets bottom="12" left="12" right="12" top="12" />
            </padding>

            <!-- DATOS CLIENTE COMPACTOS -->
            <Label styleClass="section-title" text="Datos del Cliente" />
            <VBox spacing="4">
                <TextField fx:id="customerNameField" prefHeight="32" promptText="Nombre*" />
                <TextField fx:id="customerAddressField" prefHeight="32" promptText="DirecciÃ³n" />
                <TextField fx:id="customerPhoneField" prefHeight="32" promptText="TelÃ©fono" />

                <!-- DELIVERY COMPACTO -->
                <VBox spacing="3">
                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <CheckBox fx:id="deliveryCheckBox" text="Delivery" />
                        <TextField fx:id="deliveryPriceField" prefHeight="28" prefWidth="80" promptText="Precio" visible="false" />
                    </HBox>
                    <ComboBox fx:id="deliveryComboBox" prefHeight="30" prefWidth="200" promptText="Seleccionar delivery" visible="false" />
                </VBox>
            </VBox>

            <!-- FORMA DE PAGO COMPACTA -->
            <Label styleClass="section-title" text="Forma de Pago" />
            <VBox spacing="2">
                <HBox alignment="CENTER_LEFT" spacing="5">
                    <CheckBox fx:id="cashCheckBox" text="Efectivo" />
                    <TextField fx:id="cashAmountField" prefHeight="26" prefWidth="80" promptText="Monto" visible="false" />
                </HBox>
                <HBox alignment="CENTER_LEFT" spacing="5">
                    <CheckBox fx:id="transferCheckBox" text="Transferencia" />
                    <TextField fx:id="transferAmountField" prefHeight="26" prefWidth="80" promptText="Monto" visible="false" />
                </HBox>
            </VBox>

            <!-- OBSERVACIONES -->
            <Label styleClass="section-title" text="Observaciones" />
            <TextArea fx:id="notesTextArea" prefHeight="65" prefRowCount="3" promptText="Observaciones..." wrapText="true" />

            <!-- BOTONES COMPACTOS -->
            <VBox spacing="5">
                <HBox spacing="8">
                    <Button fx:id="btnConfirm" maxWidth="Infinity" onAction="#confirmOrder" prefHeight="32" styleClass="confirm-btn" text="Aceptar" HBox.hgrow="ALWAYS" />
                    <Button fx:id="btnCancel" maxWidth="Infinity" onAction="#cancelOrder" prefHeight="32" styleClass="cancel-btn" text="Cancelar" HBox.hgrow="ALWAYS" />
                </HBox>
            <HBox spacing="8">
               <children>
                  <Button fx:id="btnBack" onAction="#goBack" prefHeight="30" styleClass="back-btn" text="â† Volver" />
                  <Button fx:id="btnPrint" onAction="#orderPrint" prefHeight="30" styleClass="back-btn" text="ðŸ–¨ï¸" />
               </children>
            </HBox>

                      <!-- CHECKBOX BAJA-->
                <HBox fx:id="adminContainer" alignment="CENTER_LEFT" spacing="8" style="-fx-padding: 2 0 0 0;" visible="false">
                    <CheckBox fx:id="deletedCheckBox" text="Orden de Baja" />
                </HBox>
            </VBox>
        </VBox>
    </HBox>
</VBox>
